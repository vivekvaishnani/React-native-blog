import Joi from '@hapi/joi';

import { BuildType } from '../../../constants';
import { BaseAndroidJob, BaseAndroidJobSchema } from '../baseJob';

interface GenericAndroidJob extends BaseAndroidJob {
  type: BuildType.Generic;
  gradleCommand: string;
  artifactPath: string;
}

const GenericAndroidJobSchema = BaseAndroidJobSchema.concat(
  Joi.object().keys({
    type: Joi.string().valid(BuildType.Generic),
    gradleCommand: Joi.string().default(':app:assembleRelease'),
    artifactPath: Joi.string().default('./android/app/build/outputs/apk/release/app-release.apk'),
  }),
);

export { GenericAndroidJob, GenericAndroidJobSchema };

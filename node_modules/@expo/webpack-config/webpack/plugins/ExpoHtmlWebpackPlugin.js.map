{"version":3,"file":"ExpoHtmlWebpackPlugin.js","sourceRoot":"","sources":["../../src/plugins/ExpoHtmlWebpackPlugin.ts"],"names":[],"mappings":";;;;;AAAA,8EAAoD;AAGpD,gCAAsD;AACtD,oCAAwD;AAExD,MAAM,cAAc,GAAG;IACrB,cAAc,EAAE,IAAI;IACpB,kBAAkB,EAAE,IAAI;IACxB,yBAAyB,EAAE,IAAI;IAC/B,eAAe,EAAE,IAAI;IACrB,qBAAqB,EAAE,IAAI;IAC3B,6BAA6B,EAAE,IAAI;IACnC,gBAAgB,EAAE,IAAI;IACtB,QAAQ,EAAE,IAAI;IACd,SAAS,EAAE,IAAI;IACf,UAAU,EAAE,IAAI;CACjB,CAAC;AAEF,MAAqB,qBAAsB,SAAQ,6BAAiB;IAClE,YAAY,GAAgB;;QAC1B,MAAM,SAAS,GAAG,GAAG,CAAC,SAAS,IAAI,cAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC7D,MAAM,MAAM,GAAG,eAAS,CAAC,GAAG,CAAC,CAAC;QAC9B,MAAM,YAAY,GAAG,aAAO,CAAC,GAAG,CAAC,KAAK,YAAY,CAAC;QAEnD;;;WAGG;QACH,MAAM,MAAM,GAAG,oCAA4B,CACzC,YAAY,CAAC,CAAC,aAAC,MAAM,CAAC,GAAG,0CAAE,KAAK,0CAAE,UAAU,CAAC,CAAC,CAAC,KAAK,EACpD,cAAc,CACf,CAAC;QAEF,6DAA6D;QAE7D,KAAK,CAAC;YACJ,iCAAiC;YACjC,QAAQ,EAAE,SAAS,CAAC,UAAU,CAAC,SAAS;YACxC,oDAAoD;YACpD,KAAK,QAAE,MAAM,CAAC,GAAG,0CAAE,IAAI;YACvB,4DAA4D;YAC5D,kEAAkE;YAClE,MAAM;YACN,8CAA8C;YAC9C,QAAQ,EAAE,SAAS,CAAC,QAAQ,CAAC,SAAS;SACvC,CAAC,CAAC;IACL,CAAC;CACF;AA7BD,wCA6BC","sourcesContent":["import HtmlWebpackPlugin from 'html-webpack-plugin';\n\nimport { Environment } from '../types';\nimport { getConfig, getMode, getPaths } from '../env';\nimport { overrideWithPropertyOrConfig } from '../utils';\n\nconst DEFAULT_MINIFY = {\n  removeComments: true,\n  collapseWhitespace: true,\n  removeRedundantAttributes: true,\n  useShortDoctype: true,\n  removeEmptyAttributes: true,\n  removeStyleLinkTypeAttributes: true,\n  keepClosingSlash: true,\n  minifyJS: true,\n  minifyCSS: true,\n  minifyURLs: true,\n};\n\nexport default class ExpoHtmlWebpackPlugin extends HtmlWebpackPlugin {\n  constructor(env: Environment) {\n    const locations = env.locations || getPaths(env.projectRoot);\n    const config = getConfig(env);\n    const isProduction = getMode(env) === 'production';\n\n    /**\n     * The user can disable minify with\n     * `web.minifyHTML = false || {}`\n     */\n    const minify = overrideWithPropertyOrConfig(\n      isProduction ? config.web?.build?.minifyHTML : false,\n      DEFAULT_MINIFY\n    );\n\n    // Generates an `index.html` file with the <script> injected.\n\n    super({\n      // The file to write the HTML to.\n      filename: locations.production.indexHtml,\n      // The title to use for the generated HTML document.\n      title: config.web?.name,\n      // Pass a html-minifier options object to minify the output.\n      // https://github.com/kangax/html-minifier#options-quick-reference\n      minify,\n      // The `webpack` require path to the template.\n      template: locations.template.indexHtml,\n    });\n  }\n}\n"]}
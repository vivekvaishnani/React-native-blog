{"version":3,"file":"ExpoInterpolateHtmlPlugin.js","sourceRoot":"","sources":["../../src/plugins/ExpoInterpolateHtmlPlugin.ts"],"names":[],"mappings":";;;;;AAAA,kGAA0E;AAI1E,gCAAmD;AAEnD,SAAgB,mBAAmB,CAAC,OAAe;IACjD,mBAAmB;IACnB,OAAO,qPAAqP,OAAO,6QAA6Q,CAAC;AACnhB,CAAC;AAHD,kDAGC;AAED,MAAqB,yBAA0B,SAAQ,+BAAqB;;AAA5E,4CAsBC;AArBQ,iCAAO,GAAG,CACf,GAAuE,EACvE,iBAAoC,EACT,EAAE;IAC7B,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,eAAS,CAAC,GAAG,CAAC,CAAC;IAC5C,MAAM,EAAE,UAAU,EAAE,GAAG,oBAAc,CAAC,GAAG,CAAC,CAAC;IAE3C,MAAM,EAAE,KAAK,EAAE,WAAW,GAAG,EAAE,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC;IACrD,MAAM,EAAE,MAAM,EAAE,GAAG,WAAW,CAAC;IAC/B,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC;IACrD,MAAM,aAAa,GAAG,mBAAmB,CAAC,mBAAmB,CAAC,CAAC;IAE/D,oCAAoC;IACpC,OAAO,IAAI,yBAAyB,CAAC,iBAAiB,EAAE;QACtD,cAAc,EAAE,UAAU;QAC1B,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI;QAC1B,SAAS,EAAE,aAAa;QACxB,aAAa,EAAE,IAAI;QACnB,OAAO,EAAE,MAAM;KAChB,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import InterpolateHtmlPlugin from 'react-dev-utils/InterpolateHtmlPlugin';\n\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\nimport { Environment } from '../types';\nimport { getConfig, getPublicPaths } from '../env';\n\nexport function createNoJSComponent(message: string): string {\n  // from twitter.com\n  return `\" <form action=\"location.reload()\" method=\"POST\" style=\"background-color:#fff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;\"><div style=\"font-size:18px;font-family:Helvetica,sans-serif;line-height:24px;margin:10%;width:80%;\"> <p>${message}</p> <p style=\"margin:20px 0;\"> <button type=\"submit\" style=\"background-color: #4630EB; border-radius: 100px; border: none; box-shadow: none; color: #fff; cursor: pointer; font-weight: bold; line-height: 20px; padding: 6px 16px;\">Reload</button> </p> </div> </form> \"`;\n}\n\nexport default class ExpoInterpolateHtmlPlugin extends InterpolateHtmlPlugin {\n  static fromEnv = (\n    env: Pick<Environment, 'mode' | 'config' | 'locations' | 'projectRoot'>,\n    HtmlWebpackPlugin: HtmlWebpackPlugin\n  ): ExpoInterpolateHtmlPlugin => {\n    const config = env.config || getConfig(env);\n    const { publicPath } = getPublicPaths(env);\n\n    const { build: buildConfig = {}, lang } = config.web;\n    const { rootId } = buildConfig;\n    const { noJavaScriptMessage } = config.web.dangerous;\n    const noJSComponent = createNoJSComponent(noJavaScriptMessage);\n\n    // Add variables to the `index.html`\n    return new ExpoInterpolateHtmlPlugin(HtmlWebpackPlugin, {\n      WEB_PUBLIC_URL: publicPath,\n      WEB_TITLE: config.web.name,\n      NO_SCRIPT: noJSComponent,\n      LANG_ISO_CODE: lang,\n      ROOT_ID: rootId,\n    });\n  };\n}\n"]}
{"version":3,"sources":["commands/export.js"],"names":["action","projectDir","options","outputPath","path","resolve","outputDir","fs","existsSync","CommandError","publicUrl","dev","UrlUtils","isHttps","validator","isURL","protocols","console","warn","status","Project","currentStatus","startedOurOwn","startOpts","reset","clear","nonPersistent","maxWorkers","startAsync","quiet","exportOptions","dumpAssetmap","dumpSourcemap","isDev","absoluteOutputDir","process","cwd","exportForAppHosting","assetUrl","stopAsync","mergeSrcDirs","mergeSrcUrl","length","tmpFolder","join","remove","ensureDir","downloadDecompressPromises","map","url","uniqFilename","basename","crypto","randomBytes","toString","tmpFileCompressed","tmpFolderUncompressed","download","decompress","push","Promise","all","mergeSrcDir","srcDirs","concat","mergeAppDistributions","uri","filename","reject","pipe","createWriteStream","on","err","src","dest","targz","error","collect","val","memo","program","command","description","option","asyncActionProjectDir"],"mappings":";;;;;;;;AAGA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEO,eAAeA,MAAf,CAAsBC,UAAtB,EAA0CC,OAAgB,GAAG,EAA7D,EAAiE;AACtE,QAAMC,UAAU,GAAGC,gBAAKC,OAAL,CAAaJ,UAAb,EAAyBC,OAAO,CAACI,SAAjC,CAAnB;;AACA,MAAIC,mBAAGC,UAAH,CAAcL,UAAd,CAAJ,EAA+B;AAC7B,UAAM,KAAIM,uBAAJ,EACJ,mBADI,EAEH,oBAAmBN,UAAW,mCAF3B,CAAN;AAID;;AACD,MAAI,CAACD,OAAO,CAACQ,SAAb,EAAwB;AACtB,UAAM,KAAID,uBAAJ,EAAiB,oBAAjB,EAAuC,uCAAvC,CAAN;AACD,GAVqE,CAWtE;;;AACA,MAAI,CAACP,OAAO,CAACS,GAAT,IAAgB,CAACC,gBAASC,OAAT,CAAiBX,OAAO,CAACQ,SAAzB,CAArB,EAA0D;AACxD,UAAM,KAAID,uBAAJ,EAAiB,oBAAjB,EAAuC,yCAAvC,CAAN;AACD,GAFD,MAEO,IAAI,CAACK,qBAAUC,KAAV,CAAgBb,OAAO,CAACQ,SAAxB,EAAmC;AAAEM,IAAAA,SAAS,EAAE,CAAC,MAAD,EAAS,OAAT;AAAb,GAAnC,CAAL,EAA2E;AAChFC,IAAAA,OAAO,CAACC,IAAR,CAAc,uBAAsBhB,OAAO,CAACQ,SAAU,mCAAtD;AACD;;AAED,QAAMS,MAAM,GAAG,MAAMC,eAAQC,aAAR,CAAsBpB,UAAtB,CAArB;AAEA,MAAIqB,aAAa,GAAG,KAApB;;AACA,MAAIH,MAAM,KAAK,SAAf,EAA0B;AACxB,wBAAI,wFAAJ;AAEA,kCAAiBlB,UAAjB;AAEA,UAAMsB,SAAS,GAAG;AAAEC,MAAAA,KAAK,EAAEtB,OAAO,CAACuB,KAAjB;AAAwBC,MAAAA,aAAa,EAAE;AAAvC,KAAlB;;AACA,QAAIxB,OAAO,CAACyB,UAAZ,EAAwB;AACtBJ,MAAAA,SAAS,CAACI,UAAV,GAAuBzB,OAAO,CAACyB,UAA/B;AACD;;AACD,wBAAI,uBAAJ;AACA,UAAMP,eAAQQ,UAAR,CAAmB3B,UAAnB,EAA+BsB,SAA/B,EAA0C,CAACrB,OAAO,CAAC2B,KAAnD,CAAN;AACAP,IAAAA,aAAa,GAAG,IAAhB;AACD,GAjCqE,CAmCtE;;;AACA,QAAMQ,aAAa,GAAG;AACpBC,IAAAA,YAAY,EAAE7B,OAAO,CAAC6B,YADF;AAEpBC,IAAAA,aAAa,EAAE9B,OAAO,CAAC8B,aAFH;AAGpBC,IAAAA,KAAK,EAAE/B,OAAO,CAACS;AAHK,GAAtB;;AAKA,QAAMuB,iBAAiB,GAAG9B,gBAAKC,OAAL,CAAa8B,OAAO,CAACC,GAAR,EAAb,EAA4BlC,OAAO,CAACI,SAApC,CAA1B;;AACA,QAAMc,eAAQiB,mBAAR,CACJpC,UADI,EAEJC,OAAO,CAACQ,SAFJ,EAGJR,OAAO,CAACoC,QAHJ,EAIJJ,iBAJI,EAKJJ,aALI,CAAN;;AAQA,MAAIR,aAAJ,EAAmB;AACjB,wBAAI,+BAAJ;AACA,UAAMF,eAAQmB,SAAR,CAAkBtC,UAAlB,CAAN;AACD,GArDqE,CAuDtE;;;AACA,QAAMuC,YAAY,GAAG,EAArB,CAxDsE,CA0DtE;;AACA,MAAItC,OAAO,CAACuC,WAAR,CAAoBC,MAApB,GAA6B,CAAjC,EAAoC;AAClC;AACA,UAAMC,SAAS,GAAGvC,gBAAKC,OAAL,CAAaJ,UAAb,EAAyBG,gBAAKwC,IAAL,CAAU,MAAV,CAAzB,CAAlB;;AACA,UAAMrC,mBAAGsC,MAAH,CAAUF,SAAV,CAAN;AACA,UAAMpC,mBAAGuC,SAAH,CAAaH,SAAb,CAAN,CAJkC,CAMlC;;AACA,UAAMI,0BAA0B,GAAG7C,OAAO,CAACuC,WAAR,CAAoBO,GAApB,CAAwB,MAAMC,GAAN,IAAa;AACtE;AACA,YAAMC,YAAY,GAAI,GAAE9C,gBAAK+C,QAAL,CAAcF,GAAd,EAAmB,SAAnB,CAA8B,IAAGG,kBACtDC,WADsD,CAC1C,EAD0C,EAEtDC,QAFsD,CAE7C,KAF6C,CAEtC,EAFnB;;AAGA,YAAMC,iBAAiB,GAAGnD,gBAAKC,OAAL,CAAasC,SAAb,EAAwBO,YAAY,GAAG,aAAvC,CAA1B;;AACA,YAAMM,qBAAqB,GAAGpD,gBAAKC,OAAL,CAAasC,SAAb,EAAwBO,YAAxB,CAA9B;;AACA,YAAMO,QAAQ,CAACR,GAAD,EAAMM,iBAAN,CAAd;AACA,YAAMG,UAAU,CAACH,iBAAD,EAAoBC,qBAApB,CAAhB,CARsE,CAUtE;;AACAhB,MAAAA,YAAY,CAACmB,IAAb,CAAkBH,qBAAlB;AACD,KAZkC,CAAnC;AAcA,UAAMI,OAAO,CAACC,GAAR,CAAYd,0BAAZ,CAAN;AACD,GAjFqE,CAmFtE;;;AACAP,EAAAA,YAAY,CAACmB,IAAb,CAAkB,GAAGzD,OAAO,CAAC4D,WAA7B;;AAEA,MAAItB,YAAY,CAACE,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,UAAMqB,OAAO,GAAG7D,OAAO,CAAC4D,WAAR,CAAoBE,MAApB,CAA2B9D,OAAO,CAACuC,WAAnC,EAAgDG,IAAhD,CAAqD,GAArD,CAAhB;AACA,wBAAK,6BAA4BmB,OAAQ,SAAQ7D,OAAO,CAACI,SAAU,EAAnE,EAF2B,CAI3B;;AACA,UAAMc,eAAQ6C,qBAAR,CACJhE,UADI,EAEJ,CAAC,GAAGuC,YAAJ,EAAkBtC,OAAO,CAACI,SAA1B,CAFI,EAEkC;AACtCJ,IAAAA,OAAO,CAACI,SAHJ,CAAN;AAKA,wBAAK,mEAAkEJ,OAAO,CAACI,SAAU,EAAzF;AACD;;AACD,sBAAK,8DAA6DJ,OAAO,CAACI,SAAU,EAApF;AACD;;AAED,MAAMmD,QAAQ,GAAG,OAAOS,GAAP,EAAYC,QAAZ,KAAyB;AACxC,SAAO,IAAIP,OAAJ,CAAY,CAACvD,OAAD,EAAU+D,MAAV,KAAqB;AACtC,0BAAMF,GAAN,EACGG,IADH,CACQ9D,mBAAG+D,iBAAH,CAAqBH,QAArB,CADR,EAEGI,EAFH,CAEM,OAFN,EAEe,MAAMlE,OAAO,CAAC,IAAD,CAF5B,EAGGkE,EAHH,CAGM,OAHN,EAGeC,GAAG,IAAI;AAClBJ,MAAAA,MAAM,CAACI,GAAD,CAAN;AACD,KALH;AAMD,GAPM,CAAP;AAQD,CATD;;AAWA,MAAMd,UAAU,GAAG,OAAOe,GAAP,EAAYC,IAAZ,KAAqB;AACtC,SAAO,IAAId,OAAJ,CAAY,CAACvD,OAAD,EAAU+D,MAAV,KAAqB;AACtCO,qBAAMjB,UAAN,CACE;AACEe,MAAAA,GADF;AAEEC,MAAAA;AAFF,KADF,EAKEE,KAAK,IAAI;AACP,UAAIA,KAAJ,EAAW;AACTR,QAAAA,MAAM,CAACQ,KAAD,CAAN;AACD,OAFD,MAEO;AACLvE,QAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,KAXH;AAaD,GAdM,CAAP;AAeD,CAhBD;;AAkBA,SAASwE,OAAT,CAAiBC,GAAjB,EAAsBC,IAAtB,EAA4B;AAC1BA,EAAAA,IAAI,CAACpB,IAAL,CAAUmB,GAAV;AACA,SAAOC,IAAP;AACD;;eAEeC,OAAD,IAAkB;AAC/BA,EAAAA,OAAO,CACJC,OADH,CACW,sBADX,EAEGC,WAFH,CAEe,qEAFf,EAGGC,MAHH,CAGU,wBAHV,EAGoC,4DAHpC,EAIGA,MAJH,CAKI,oBALJ,EAMI,0EANJ,EAOI,MAPJ,EASGA,MATH,CAUI,uBAVJ,EAWI,oIAXJ,EAYI,UAZJ,EAcGA,MAdH,CAcU,qBAdV,EAciC,4CAdjC,EAeGA,MAfH,CAeU,OAfV,EAemB,yEAfnB,EAgBGA,MAhBH,CAgBU,sBAhBV,EAgBkC,kDAhBlC,EAiBGA,MAjBH,CAiBU,aAjBV,EAiByB,yDAjBzB,EAkBGA,MAlBH,CAkBU,uBAlBV,EAkBmC,sCAlBnC,EAkB2EN,OAlB3E,EAkBoF,EAlBpF,EAmBGM,MAnBH,CAoBI,uBApBJ,EAqBI,kDArBJ,EAsBIN,OAtBJ,EAuBI,EAvBJ,EAyBGM,MAzBH,CAyBU,qBAzBV,EAyBiC,kDAzBjC,EA0BGC,qBA1BH,CA0ByBpF,MA1BzB,EA0BiC,KA1BjC,EA0BwC,IA1BxC;AA2BD,C","file":"../../commands/export.js","sourceRoot":"/expo-cli@3.9.1/src"}